## 从输入URL到页面加载完成发生了什么? 
### 1. 输入url 

### 2. DNS解析 

- 1）域名解析，浏览器查看本地hosts文件，有无域名规则，有就使用hosts中的ip地址 
- 2）如果hosts中没找到对应的ip地址，浏览器发出一个DNS 请求到本地DNS服务器 
- 3）查询输入的网址的DNS请求到达本地DNS服务器后，本地DNS服务器会查询它的缓存记录，(递归查询)， 如果没有，本地DNS服务器向DNS根服务器进行查询 
- 4）如果没有，根服务器会告诉本地DNS服务器，然后到域服务器上面查询，这是一个迭代的过程 
- 5）域服务器会告诉本地DNS服务器，域名的解析服务器的地址 
- 6）最后，本地DNS服务器向域名的解析服务器发出请求，收到一个域名和ip地址，本地DNS服务器将ip地址 返回给用户电脑，并将对应关系保存在缓存中，下次用户查询时，直接返回结果，加快网络访问 

### 3. 浏览器向web服务器发送一个HTTP请求 

- 1）建立TCP连接 

  - TCP三次握手 

    - 1.客户端将标志位SYN置为1，随机生成一个seq数据包到服务器，客户端进入SYN_SENT状态，等待确认 

    - 2.服务器接收数据包从SYN=1得知客户端请求连接，服务器将SYN和ACK置为1，ack为J(随机 值)+1，并将数据包发送给客户端确认请求，服务器进入SYN_RCVD状态 

    - 3.客户端收到确认后，检查ack是否为J+1,ACK是否为1，如果正确将标志位ACK置为1，ack=K+1， 并将数据包发送给服务器，服务器检查ack是否为k+1，ACK是否为1，如果正确则连接建立成功， 客户端和服务器都进入ESTABLISHED状态，完成3次握手，服务器和客户端可以传数据了 

      
    
  - TCP四次挥手 : 
    
    - 1.客户端发送一个FIN，用来关闭客户端到服务器的数据传送，客户端进入FIN_WAIT_1状态 
    - 2.服务器收到FIN后，发送一个ACK给客户端，服务器进入CLOSE_WAIT状态 
    - 3.服务器发送一个FIN，用来关闭服务器到客户端的数据传送，服务器进入LAST_ACK状态 
    - 4.客户端收到FIN后，客户端进入TIME_WAIT状态，然后发送一个ACK给服务器，服务器进入 CLOSED状态，完成四次挥手 

### 4. 服务器处理请求
### 5. 服务器返回一个HTTP响应 

- http响应包括:状态行，响应头，响应正文 
### 6. 浏览器渲染页面 

- 1）解析HTML文件，创建DOM树

- 2）解析CSS

- 3）将CSS与DOM合并，构建渲染树 4)布局和绘制，重绘(repaint)和重排(reflow) 

- 解释器根据词语构建节点(Node)，形成 DOM 树。 如果节点是 JavaScript 代码的话，调用 JavaScript 引擎 解释并执行。 JavaScript 代码可能会修改 DOM 树的结构 如果节点需要依赖其他资源，例如图片、CSS、视 频等，调用资源加载器来加载它们，但是它们是异步的，不会阻碍当前 DOM 树的创建，直到 JavaScript 的 资源加载并被 JavaScript 引擎执行后才继续 DOM 树的创建。 

- reflow

  - 对于DOM结构中的各个元素都有自己的盒子(模型)，这些都需要浏览器根据各种样式(浏览器的、开发人员定义的等)来计算并根据计算结果将元素放到它该出现的位置，这个过程称之为reflow。

-  repaint

  - 当各种盒子的位置、大小以及其他属性，例如颜色、字体大小等都确定下来后，浏览器于是便把这些元 素都按照各自的特性绘制了一遍，于是页面的内容出现了，这个过程称之为repaint。

- 在开发中我们可以在script中声明两个不太常见的属性:defer和async，下面分别解释了他们的用法: defer:用于开启新的线程下载脚本文件，并使脚本在文档解析完成后执行。 async:HTML5新增属性，用 于异步下载脚本文件，下载完毕立即解释执行代码。 